{"version":3,"sources":["../../../../assets/Script/assets/Script/rope.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["\n// Learn TypeScript:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport class rope extends cc.Component {\n\n    @property(Number)\n    pointNum: number = 25;\n    @property(Number)\n    spacing: number = 20;\n\n\n    path:any = null;\n\n    points: Array<cc.Vec2> = [];\n\n\n    testId: number = null;\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.path = this.getComponent('R.path');\n        this.path.fillColor = 'none';\n\n\n        for (let i = 0; i < this.pointNum; i++) {\n            this.points.push(cc.v2((i - this.pointNum/2)*this.spacing,0));\n        }\n        this.path.points(this.points);\n\n        let canvas = cc.find('Canvas')\n        canvas.on(cc.Node.EventType.TOUCH_START, this.touchBegan, this);\n        canvas.on(cc.Node.EventType.TOUCH_MOVE, this.touchMove, this);\n        canvas.on(cc.Node.EventType.TOUCH_END, this.touchEnded, this);\n\n    }\n\n    start () {\n    }\n\n    judgePoints(pos:cc.Vec2){\n        this.points[0] = pos;\n        for (let i = 0; i < this.points.length-1; i++) {\n            let segment = this.points[i];\n            let nextSegment = this.points[i+1];\n            let vector = segment.sub(nextSegment);\n            vector.normalizeSelf();\n            vector.mulSelf(this.spacing);\n            this.points[i + 1] = segment.sub(vector);\n        }\n        this.path.points(this.points)\n    }\n\n    touchBegan(event: cc.Touch) {\n        let p = this.node.convertToNodeSpace(event.getLocation());\n        this.judgePoints(p);\n    }\n    touchMove(event: cc.Touch) {\n        let p = this.node.convertToNodeSpace(event.getLocation());\n        cc.log(p.x,p.y);\n        this.judgePoints(p);\n    }\n    touchEnded(event: cc.Touch) {\n        let p = this.node.convertToNodeSpace(event.getLocation());\n        this.judgePoints(p);\n    }\n\n    touchEvent(){\n        // async function aa() {\n        //     let handle = await BBAudio.playSound('audio/UI/1')\n        //     cc.log(\"touchEvent\", handle)\n        // }\n        // aa()\n\n        this.testId = BBAudio.playSound('audio/UI/1',true)\n\n        // this.scheduleOnce(function(){\n        //     cc.log(\"touchEvent\", handle)\n        // },1)\n        // cc.loader.loadRes('audio/UI/1', cc.AudioClip, function (err, clip) {\n        //     cc.audioEngine.play(clip);\n        // });\n\n        // function pathformat() {\n        //     return new Promise((resolve, reject) => {\n        //         cc.loader.loadRes('audio/UI/1', <any>cc.AudioClip, function (err, clip) {\n        //             resolve(clip)\n        //         });\n        //     })\n        // }\n        // let result = await pathformat();\n        // cc.audioEngine.play(<any>result,true,1);\n    }\n\n    touchEvent1() {\n        cc.log('=======touchEvent1'+this.testId)\n        BBAudio.stopSound(this.testId);\n\n    }\n    // update (dt) {}\n}\n"]}