{"version":3,"sources":["../../../../../assets/extension/raphael/assets/extension/raphael/R.path.js"],"names":["trasform","require","style","utils","smooth","simplify","animate","drawer","M","L","C","Z","sqrt","Math","max","abs","selectedColor","cc","color","PathDefine","extends","Component","properties","_dirty","default","serializable","notify","parent","_commands","points","undefined","init","ctx","showHandles","showBoundingBox","onLoad","addComponent","Graphics","_applyStyle","ellipse","cx","cy","rx","ry","cmds","push","circle","r","rect","x","y","w","h","close","closed","length","clear","lastPoint","i","ii","point","makePath","R","path2curve","path","getPathString","commands","string","join","getTotalLength","totalLength","_analysis","getBbox","bbox","getWorldBbox","worldBbox","_transformDirty","center","position","add","p","width","height","_curves","curves","subCurves","cmd","c","subPoints","tessTolSclae","scale","j","jj","curve","tesselateBezier","lastx","lasty","dx","dy","minx","miny","maxx","maxy","AffineTransform","transformRect","getTransform","getWorldTransform","_drawCommands","t","_transformCommand","func","apply","_drawHandles","prev","size","half","originLineWidth","lineWidth","originStrokeColor","strokeColor","originFillColor","fillColor","drawHandle","x1","y1","x2","y2","moveTo","lineTo","stroke","fill","fillRect","_drawDashPath","dashArray","dashOffset","drawDashPoints","update","dt","_updateAnimate","getStyledColor","beginPath","Path","Class","defineClass","forEach","prototype","l","arguments"],"mappings":"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","file":"R.path.js","sourceRoot":"../../../../../assets/extension/raphael","sourcesContent":["'use strict';\n\nvar trasform = require('./component/R.transform');\nvar style = require('./component/R.style');\nvar utils = require('./utils/R.utils');\n\n// optional\nvar smooth = require('./component/optional/R.smooth');\nvar simplify = require('./component/optional/R.simplify');\nvar animate = require('./component/optional/R.animate');\n\nvar drawer = {\n    M: 'moveTo',\n    L: 'lineTo',\n    C: 'bezierCurveTo',\n    Z: 'close',\n};\n\nvar sqrt = Math.sqrt;\nvar max  = Math.max;\nvar abs  = Math.abs;\n\nvar selectedColor = cc.color(0,157,236);\n\n\nvar PathDefine = {\n    extends: cc.Component,\n\n    properties: {\n        _dirty: {\n            default: true,\n            serializable: false,\n            notify: function () {\n                if (this.parent && this._dirty) {\n                    this.parent._dirty = true;\n                    \n                    if (this._commands) {\n                        this._commands.points = undefined;\n                    }\n                }\n            }\n        }\n    },\n\n    init: function (parent) {\n        if (parent) {\n            this.parent = parent;\n            this.ctx = parent.ctx;\n        }\n\n        this._commands = [];\n        this._dirty = true;\n\n        this.showHandles = false;\n        this.showBoundingBox = false;\n    },\n\n    onLoad: function () {\n        this.init();\n\n        if (!this.ctx) {\n            // this.ctx = new _ccsg.GraphicsNode();\n            // this.node._sgNode.addChild(this.ctx);\n            this.ctx = this.addComponent(cc.Graphics);\n\n            this._applyStyle();\n        }\n    },\n\n    ////////////////////////////////////////////\n    // 椭圆\n    ellipse: function (cx, cy, rx, ry) {\n        if (!ry) {\n            ry = rx;\n        }\n        \n        let cmds = this._commands;\n        cmds.push(['M', cx, cy]);\n        cmds.push(['m', 0, -ry]);\n        cmds.push(['a', rx, ry, 0, 1, 1, 0, 2 * ry]);\n        cmds.push(['a', rx, ry, 0, 1, 1, 0, -2 * ry]);\n        // cmds.push(['z']);\n    },\n\n    // 圆\n    circle: function (cx, cy, r) {\n        this.ellipse(cx, cy, r);\n    },\n\n    // 矩形\n    rect: function (x, y, w, h, r) {\n        let cmds = this._commands;\n\n        if (r) {\n            cmds.push(['M', x + r, y]);\n            cmds.push(['l', w - r * 2, 0]);\n            cmds.push(['a', r, r, 0, 0, 1, r, r]);\n            cmds.push(['l', 0, h - r * 2]);\n            cmds.push(['a', r, r, 0, 0, 1, -r, r]);\n            cmds.push(['l', r * 2 - w, 0]);\n            cmds.push(['a', r, r, 0, 0, 1, -r, -r]);\n            cmds.push(['l', 0, r * 2 - h]);\n            cmds.push(['a', r, r, 0, 0, 1, r, -r]);\n        }\n        else {\n            cmds.push(['M', x, y]);\n            cmds.push(['l', w, 0]);\n            cmds.push(['l', 0, h]);\n            cmds.push(['l', -w, 0]);\n        }\n\n        cmds.push(['z']);\n    },\n\n    close: function () {\n        this._commands.push(['Z']);\n    },\n    \n    // 点集\n    points: function (points, closed) {\n        if (points.length <= 1) {\n            return;\n        }\n\n        this.clear();\n\n        var lastPoint = points[0];\n        this.M(lastPoint.x, lastPoint.y);\n\n        for (var i = 1, ii = points.length; i < ii; i++) {\n            var point = points[i];\n            this.C(lastPoint.x, lastPoint.y, point.x, point.y, point.x, point.y);\n            lastPoint = point;\n        }\n\n        if (closed) {\n            this.C(lastPoint.x, lastPoint.y, points[0].x, points[0].y, points[0].x, points[0].y);\n        }\n\n        this.makePath();\n    },\n\n    // 刷新绘制\n    makePath: function () {\n        this._commands = R.utils.path2curve(this._commands);\n        this._dirty = true;\n    },\n\n    path: function (path) {\n        this._commands = R.utils.path2curve(path);\n        this._dirty = true;\n    },\n\n    clear: function () {\n        this._commands.length = 0;\n    },\n\n    getPathString: function () {\n        var commands = this._commands;\n        var string = [];\n\n        for (var i = 0, ii = commands.length; i < ii; i++) {\n            string[i] = commands[i].join(' ');\n        }\n        string = string.join(' ');\n        return string;\n    },\n\n    getTotalLength: function () {\n        if (this._commands.totalLength === undefined) {\n            this._analysis();\n        }\n\n        return this._commands.totalLength;\n    },\n\n    getBbox: function () {\n        if (this._commands.bbox === undefined) {\n            this._analysis();\n        }\n\n        return this._commands.bbox;\n    },\n\n    getWorldBbox: function () {\n        if (this._commands.worldBbox === undefined || this._transformDirty) {\n            this._analysis();\n        }\n\n        return this._commands.worldBbox;\n    },\n\n    center: function (x, y) {\n        x = x || 0;\n        y = y || 0;\n        \n        var bbox = this.getBbox();\n        this.position = this.position.add(cc.p(-bbox.width/2 - bbox.x + x, -bbox.height/2 - bbox.y + y));\n    },\n\n    _curves: function () {\n        var cmds = this._commands;\n        if (cmds.curves) return cmds.curves;\n\n        var curves = [];\n        var subCurves;\n        var x, y;\n\n        for (var i = 0, ii = cmds.length; i < ii; i++) {\n            var cmd = cmds[i];\n            var c = cmd[0];\n            \n            if (c === 'M') {\n                subCurves = [];\n                curves.push(subCurves);\n\n                x = cmd[1];\n                y = cmd[2];\n            }\n            else if (c === 'C' && x !== undefined && y !== undefined) {\n                subCurves.push([x, y, cmd[1], cmd[2], cmd[3], cmd[4], cmd[5], cmd[6]]);\n\n                x = cmd[5];\n                y = cmd[6];\n            }\n        }\n\n        cmds.curves = curves;\n        return curves;\n    },\n\n    _analysis: function () {\n        var cmds = this._commands;\n        if (cmds.points) {\n            return;\n        }\n\n        var curves = this._curves();\n\n        var points = [];\n        var x, y;\n        var subPoints;\n        var tessTolSclae = 1/max(abs(this.scale.x), abs(this.scale.y));\n\n        for (var i = 0, ii = curves.length; i < ii; i++) {\n            var subCurves = curves[i];\n            subPoints = [];\n            points.push(subPoints);\n\n            for (var j = 0, jj = subCurves.length; j < jj; j++) {\n                var curve = subCurves[j];\n                R.utils.tesselateBezier(curve[0], curve[1], curve[2], curve[3], curve[4], curve[5], curve[6], curve[7], 0, subPoints, tessTolSclae);\n            }\n        }\n\n        cmds.points = points;\n\n        var totalLength = 0;\n        var lastx, lasty;\n        var dx, dy;\n        var minx = 10e7, miny = 10e7, \n            maxx = -10e7, maxy = -10e7;\n\n        for (var i = 0, ii = points.length; i < ii; i++) {\n            subPoints = points[i];\n\n            for (var j = 0, jj = subPoints.length / 2; j < jj; j++) {\n                x = subPoints[j*2];\n                y = subPoints[j*2 + 1];\n\n                if (x < minx) minx = x;\n                if (x > maxx) maxx = x;\n\n                if (y < miny) miny = y;\n                if (y > maxy) maxy = y;\n\n                if (j === 0) {\n                    lastx = x;\n                    lasty = y;\n                }\n\n                dx = x - lastx;\n                dy = y - lasty;\n\n                totalLength += sqrt(dx*dx + dy*dy);\n\n                lastx = x;\n                lasty = y;\n            }\n        }\n\n        cmds.totalLength = totalLength;\n\n        if (totalLength === 0) {\n            cmds.bbox = cmds.worldBbox = cc.rect();\n        }\n        else {\n            var rect = cc.rect(minx, miny, maxx - minx, maxy - miny);\n            cmds.bbox = cc.AffineTransform.transformRect([], rect, this.getTransform());\n            cmds.worldBbox = cc.AffineTransform.transformRect([], rect, this.getWorldTransform());\n        }\n    },\n\n    //////////////////////////////////////\n    _drawCommands: function () {\n        var commands = this._commands;\n        var ctx = this.ctx;\n        var t = this.getWorldTransform();\n\n        for (var i = 0, ii = commands.length; i < ii; i++) {\n            var cmd = commands[i];\n            var c = cmd[0];\n            cmd = this._transformCommand(cmd, t);\n            var func = ctx[ drawer[c] ];\n\n            if (func) func.apply(ctx, cmd);\n        }\n    },\n\n    _drawHandles: function () {\n        var ctx = this.ctx;\n        var commands = this._commands;\n\n        var prev;\n        var size = 5;\n        var half = size / 2;\n\n        var originLineWidth = ctx.lineWidth;\n        var originStrokeColor = ctx.strokeColor;\n        var originFillColor   = ctx.fillColor;\n\n        ctx.lineWidth = 1;\n        ctx.strokeColor = selectedColor;\n        ctx.fillColor = selectedColor;\n\n        var t = this.getWorldTransform();\n\n        function drawHandle(x1, y1, x2, y2) {\n            ctx.moveTo(x1, y1);\n            ctx.lineTo(x2, y2);\n            ctx.stroke();\n            ctx.circle(x2, y2, half);\n            ctx.fill();\n        }\n\n        for (var i = 0, ii = commands.length; i < ii; i++) {\n            var cmd = commands[i];\n            var c = cmd[0];\n            cmd = this._transformCommand(cmd, t);\n\n            if (c === 'M') {\n                prev = cmd;\n            }\n            else if(c === 'C') {\n                drawHandle(prev[0], prev[1], cmd[0], cmd[1]);\n                drawHandle(cmd[4], cmd[5], cmd[2], cmd[3]);\n                prev = [cmd[4], cmd[5]];\n            }\n\n            if (prev)\n                ctx.fillRect(prev[0]-half, prev[1]-half, size, size);\n        }\n\n        ctx.lineWidth = originLineWidth;\n        ctx.strokeColor = originStrokeColor;\n        ctx.fillColor   = originFillColor;\n    },\n\n    _drawDashPath: function () {\n        var cmds = this._commands;\n        var ctx = this.ctx;\n        var dashArray = this.dashArray;\n        var dashOffset = this.dashOffset;\n\n        var points;\n\n        if (!cmds.points) {\n            this._analysis();\n        }\n\n        points = cmds.points;\n\n        var t = this.getWorldTransform();\n        for (var i = 0, ii = points.length; i < ii; i++) {\n            var subPoints = points[i];\n\n            R.utils.drawDashPoints(subPoints, ctx, dashArray, dashOffset, t);\n        }\n    },\n\n    //////////////////////////////////////\n    update: function (dt) {\n        if (this._updateAnimate) {\n            this._updateAnimate(dt);\n        }\n        \n        if ( this._commands.length === 0 || !this._dirty || (this.parent && !this.parent._dirty)) {\n            return;\n        }\n\n        this._applyStyle();\n\n        if (!this.parent) {\n            this.ctx.clear();\n        }\n\n        if (this.dashArray.length > 0) {\n            if (this.getStyledColor('fillColor')) {\n                this._drawCommands();\n                this.ctx.fill();\n            }\n\n            if (this.getStyledColor('strokeColor')) {\n                this.ctx.beginPath();\n                this._drawDashPath();\n                this.ctx.stroke();\n            }\n        }\n        else {\n            this._drawCommands();\n\n            if (this.getStyledColor('fillColor')) this.ctx.fill();\n            if (this.getStyledColor('strokeColor')) this.ctx.stroke();\n        }\n\n        if (this.showBoundingBox) {\n            var bbox = this.getWorldBbox();\n            this.ctx.rect(bbox.x, bbox.y, bbox.width, bbox.height);\n            this.ctx.stroke();\n        }\n\n        if ( this.showHandles ) this._drawHandles();\n\n        this._dirty = false;\n    }\n};\n\nvar Path = cc.Class(utils.defineClass(PathDefine, trasform, style, smooth, simplify, animate));\n\n['M', 'm', 'L', 'l', 'H', 'h', 'V', 'v', 'C', 'c', 'S', 's', 'Q', 'q', 'T', 't', 'A', 'a', 'Z','z'].forEach(function (cmd) {\n    Path.prototype[cmd] = function () {\n        var cmds = [cmd];\n        for (var i = 0, l = arguments.length; i < l; i++) {\n            cmds[i+1] = arguments[i];\n        }\n        this._commands.push(cmds);\n    };\n});\n"]}