{"version":3,"sources":["../../../../../assets/extension/raphael/assets/extension/raphael/R.group.js"],"names":["Path","require","trasform","style","utils","svg","GroupDefine","extends","cc","Component","properties","selected","default","notify","children","i","ii","length","_dirty","serializable","onLoad","init","ctx","addComponent","Graphics","parent","showBoundingBox","addPath","path","push","addGroup","group","Group","getWorldBbox","rect","bbox","width","height","rectUnion","refresh","clear","update","dt","child","x","y","stroke","Class","defineClass"],"mappings":"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","file":"R.group.js","sourceRoot":"../../../../../assets/extension/raphael","sourcesContent":["var Path = require('./R.path');\n\nvar trasform = require('./component/R.transform');\nvar style = require('./component/R.style');\nvar utils = require('./utils/R.utils');\n\n// optional\nvar svg = require('./component/optional/R.svg');\n\nvar GroupDefine = {\n    extends: cc.Component,\n\n    properties: {\n        selected: {\n            default: false,\n            notify: function () {\n                var children = this.children;\n                var selected = this.selected;\n\n                for (var i = 0, ii = children.length; i < ii; i++) {\n                    children[i].selected = selected;\n                }\n            }\n        },\n\n        _dirty: {\n            default: true,\n            serializable: false\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.init();\n\n        if (!this.ctx) {\n            // this.ctx = new _ccsg.GraphicsNode();\n            // this.node._sgNode.addChild(this.ctx);\n            this.ctx = this.addComponent(cc.Graphics);\n            \n        }\n    },\n\n    init: function (parent) {\n        this.children = [];\n\n        if (parent) {\n            this.parent = parent;\n            this.ctx = parent.ctx;\n        }\n\n        this.showBoundingBox = false;\n    },\n\n    addPath: function () {\n        var path = new Path();\n        path.init(this);\n\n        this.children.push(path);\n        this._dirty = true;\n\n        return path;\n    },\n\n    addGroup: function () {\n        var group = new Group();\n        group.init(this);\n\n        this.children.push(group);\n        this._dirty = true;\n\n        return group;\n    },\n\n    getWorldBbox: function () {\n        var rect;\n        var children = this.children;\n        for (var i = 0, ii = children.length; i < ii; i++) {\n            var bbox = children[i].getWorldBbox();\n            \n            if (bbox.width !== 0 && bbox.height !== 0) {\n                if (!rect) {\n                    rect = children[i].getWorldBbox();\n                }\n                else {\n                    rect = cc.rectUnion(rect, children[i].getWorldBbox());    \n                }\n            }\n        }\n\n        return rect || cc.rect();\n    },\n\n    refresh: function () {\n        this._dirty = true;\n    },\n\n    clear: function () {\n        this.children = [];\n        this._dirty = true;\n    },\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n\n        if (!this._dirty) return;\n\n        if (!this.parent) {\n            this.ctx.clear();\n        }\n\n        var children = this.children;\n        for (var i = 0, ii = children.length; i < ii; i++) {\n            var child = children[i];\n            child._dirty = true;\n            child.update(dt);\n        }\n\n        if (this.showBoundingBox) {\n            var bbox = this.getWorldBbox();\n            this.ctx.rect(bbox.x, bbox.y, bbox.width, bbox.height);\n            this.ctx.stroke();\n        }\n\n        this._dirty = false;\n    },\n};\n\nvar Group = cc.Class(utils.defineClass(GroupDefine, trasform, style, svg));\n"]}